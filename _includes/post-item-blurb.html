{%- if post.last_modified_at -%}
    {%- assign updated = post.last_modified_at | date: "%Y%m%d" -%}
{%- else -%}
    {%- assign updated = post.date | date: "%Y%m%d" -%}
{%- endif -%}

{%- assign excerpt=post.excerpt | strip_html -%}    
{%- comment -%} if excerpt too short, get more from content? {%- endcomment -%}
{%- if excerpt.size < 35 -%}
    {%- assign excerpt=post.content | markdownify | strip_html -%}
{%- endif -%}

{%- assign published=post.date | date: "%Y.%m.%d" -%}
{%- assign published_datetime=post.date | date: "%Y-%m-%d" -%}
{%- if post.last_modified_at -%}
    {%- assign modified = post.last_modified_at | date: "%Y.%m.%d" -%}
    {%- assign modified_datetime = post.last_modified_at | date: "%Y.%m.%d" -%}
{%- endif -%}
{%- assign joined_tags = post.tags | join: " " -%}

<article data-date="{{post.date | date: '%Y%m%d'}}" data-updated="{{updated}}" class="post-item" data-tags="{{joined_tags | downcase}}">
    <div class="article-content">
        <div class="article-title">
            <a href="{{ site.baseurl }}{{ post.url }}">
                <h2>{{post.title}}</h2>
            </a>
        </div>
        <div class="article-description">
            <a href="{{ site.baseurl }}{{ post.url }}">{{excerpt | truncatewords: 50}}</a>
        </div>
    </div>
    <div class="article-time">
        <time datetime="{{published_datetime}}">{{published}}</time>
        {%- if modified -%} - <time datetime="{{modified_datetime}}">{{modified}}</time>{%- endif -%}
    </div>
    <div class="article-tags">
    {% for tag in post.tags %}
        <a href="{{ site.baseurl }}/#{{tag | downcase}}">{{tag}}</a>
        <br>
    {% endfor %}
    </div>
</article>