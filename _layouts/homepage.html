---
layout: default
---

{% include hero.html %}

<h1 style="margin-bottom: .1em;"><span style="letter-spacing: .37em;">DYNOMIGHT</span><br>INTERNET WEBSITE&nbsp;</h1>

{% assign all_tags_raw = "" %}
{% for post in site.posts %}
  {% if post.tags %}
    {% assign current_post_tags_joined = post.tags | join: " " %}
    {% assign all_tags_raw = all_tags_raw | append: current_post_tags_joined | append: " " %}
  {% endif %}
{% endfor %}
{% assign unique_sorted_tags = all_tags_raw | split: " " | compact | uniq | sort %}


<div style="max-width: 80ch; margin-left: auto; margin-right: auto; padding-left: 10px; padding-right: 10px;">
<div class="tag-selector-container">
    <select id="tag-filter">
        <option value="all">all</option>
        {% for tag in unique_sorted_tags %}
            <option value="{{ tag | slugify }}">{{tag}}</option>
        {% endfor %}
    </select>
    <button id="clear-filter-btn" class="clear-filter-btn">&times;</button>
</div>
</div>

{% assign posts_by_updated = site.posts | sort: "last_modified_at" %}
{% assign posts_by_updated = site.posts %}
{%- for post in posts_by_updated -%}
    {% include post-item-blurb.html %}
{% endfor %}

<script>

document.addEventListener('DOMContentLoaded', () => {
    const articles = document.querySelectorAll('main article');
    const tagFilterSelect = document.getElementById('tag-filter');
    const clearFilterBtn = document.getElementById('clear-filter-btn');

    const getTagFromHash = () => {
        const hash = window.location.hash.substring(1);
        return hash || 'all';
    };

    const applyFilter = (tag) => {
        articles.forEach(article => {
            const articleTags = article.dataset.tags ? article.dataset.tags.split(' ') : [];
            if (tag === 'all' || articleTags.includes(tag)) {
                article.classList.remove('hidden');
            } else {
                article.classList.add('hidden');
            }
        });
    };

    const updateDropdownSelection = (activeTag) => {
        if (tagFilterSelect) {
            tagFilterSelect.value = activeTag;
        }
        if (clearFilterBtn) {
            if (activeTag === 'all') {
                clearFilterBtn.style.opacity = '0';
                clearFilterBtn.style.pointerEvents = 'none';
            } else {
                clearFilterBtn.style.opacity = '1';
                clearFilterBtn.style.pointerEvents = 'auto';
            }
        }
    };

    const filterAndSyncUI = () => {
        const currentTag = getTagFromHash();
        applyFilter(currentTag);
        updateDropdownSelection(currentTag);
    };

    filterAndSyncUI();
    window.addEventListener('hashchange', filterAndSyncUI);

    if (tagFilterSelect) {
        tagFilterSelect.addEventListener('change', (event) => {
            const selectedTag = event.target.value;
            if (selectedTag === 'all') {
                history.pushState(null, '', window.location.pathname + window.location.search);
                filterAndSyncUI();
            } else {
                window.location.hash = selectedTag;
            }
        });
    }

    if (clearFilterBtn) {
        clearFilterBtn.addEventListener('click', () => {
            history.pushState(null, '', window.location.pathname + window.location.search);
            filterAndSyncUI();
        });
    }
});

</script>